(this["webpackJsonpthird-conflict"]=this["webpackJsonpthird-conflict"]||[]).push([[0],{156:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var a=n(5),i=n(40),s=n(339),r=n(194),c=n(340),o=n(137),l=n(55),h=n(45),u=n(0),j=n(338),d=n(183),b=n(54),m=n(28),x=(n(204),n(80)),O=n(157),f=n(166),g=n(186);var p=Object(d.hot)(e)((function(){var e=Object(j.a)(["auth"]),t=Object(i.a)(e,2),n=t[0],d=t[1],p=Object(u.useState)(n.auth),y=Object(i.a)(p,2),v=y[0],M=y[1];return Object(a.jsx)(b.a,{children:Object(a.jsxs)(o.a,{children:[Object(a.jsxs)(o.a.Header,{children:[Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)(b.b,{to:"/",children:Object(a.jsx)("img",{src:"/images/logo.png"})})}),Object(a.jsxs)(l.a,{theme:"dark",mode:"horizontal",selectable:!1,children:[Object(a.jsx)(l.a.Item,{disabled:!v,icon:Object(a.jsx)(s.a,{}),children:Object(a.jsx)(b.b,{to:"/games",children:"Games"})}),Object(a.jsx)(l.a.Item,{icon:Object(a.jsx)(r.a,{}),children:Object(a.jsx)(b.b,{to:"/account",children:"Account"})}),Object(a.jsx)(l.a.Item,{disabled:!0,icon:Object(a.jsx)(c.a,{}),children:Object(a.jsx)(b.b,{to:"/settings",children:"Settings"})})]})]}),Object(a.jsx)(x.a.Provider,{value:v,children:Object(a.jsx)(o.a.Content,{children:Object(a.jsxs)(m.c,{children:[Object(a.jsx)(m.a,{path:"/games",children:Object(a.jsx)(g.a,{})}),Object(a.jsx)(m.a,{path:"/account",children:Object(a.jsx)(O.a,{onChange:function(e){d("auth",e),M(e)}})}),Object(a.jsx)(m.a,{path:"/settings",children:"Hello Settings"}),Object(a.jsx)(m.a,{path:"/",children:v?Object(a.jsx)(f.a,{}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(h.a,{type:"dashed",children:Object(a.jsxs)(b.b,{to:"/account",children:[Object(a.jsx)(r.a,{})," Login Required"]})})})})]})})})]})})}))}).call(this,n(203)(e))},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),i=n(193),s=n(45),r=n(0),c=n(80);n(205);function o(e){var t=Object(r.useContext)(c.a);return Object(a.jsxs)(i.a,{className:"account-form",labelCol:{span:8},wrapperCol:{span:16},children:[Object(a.jsx)("h1",{children:"Account"}),Object(a.jsxs)("p",{children:["A login is required to play ",Object(a.jsx)("strong",{children:"Third Conflict"}),". Currently you can login as a ",Object(a.jsx)("strong",{children:"Guest"})," and create and play games locally. In ",Object(a.jsx)("em",{children:"future"})," releases you will be able to login with"," ",Object(a.jsx)("strong",{children:"Discord"})," and play online."]}),!t&&Object(a.jsxs)(i.a.Item,{children:[Object(a.jsx)(s.a,{type:"primary",onClick:function(){return e.onChange("Guest")},children:"Login as Guest"}),Object(a.jsx)(s.a,{type:"ghost",disabled:!0,children:"Login with Discord"})]}),t&&Object(a.jsx)(s.a,{type:"primary",danger:!0,onClick:function(){return e.onChange(null)},children:"Logout"})]})}},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(5),i=n(0),s=n(54),r=n(77);n(296);function c(){var e=Object(i.useContext)(r.a);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:["Welcome back to ",Object(a.jsx)("strong",{children:"Third Conflict"})]}),Object(a.jsxs)("p",{children:["You have ",Object(a.jsxs)(s.b,{to:"/games",children:[e.games.length," pending game(s)"]}),"."]})]})}},186:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var a=n(5),i=n(59),s=n(40),r=n(194),c=n(347),o=n(348),l=n(193),h=n(344),u=n(345),j=n(119),d=n(45),b=n(346),m=n(343),x=n(62),O=n(0),f=n(28),g=n(54),p=n(191),y=n(187),v=n(70),M=n(51),k=n(52),w=function(){function e(t){Object(M.a)(this,e),this.data=t}return Object(k.a)(e,[{key:"distance",value:function(e){var t=[this.x,this.y],n=t[0],a=t[1],i=e instanceof Array?e:[e.x,e.y],r=Object(s.a)(i,2),c=r[0],o=r[1];return parseFloat(Math.sqrt(Math.pow(c-n,2)+Math.pow(o-a,2)).toFixed(2))}},{key:"x",get:function(){return this.data[0]}},{key:"y",get:function(){return this.data[1]}}]),e}();var C=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new x.a;Object(M.a)(this,e),this.prando=i,this.xMin=0,this.yMin=0,this.xMax=void 0,this.yMax=void 0,this.radius=void 0,this.cellSize=void 0,this.k=void 0,this.state=void 0,this.queue=void 0,this.firstPoint=!0,this.xMax=t[0],this.yMax=t[1],this.radius=Math.max(n,1),this.cellSize=this.radius*Math.SQRT1_2,this.k=Math.max(a,2),this.reset()}return Object(k.a)(e,[{key:"reset",value:function(){var e=Math.ceil((this.xMax-this.xMin)/this.cellSize),t=Math.ceil((this.yMax-this.yMin)/this.cellSize);this.state={width:e,height:t,data:new Array(e*t).fill(null)},this.queue=[],this.firstPoint=!0}},{key:"createPoint",value:function(e,t){var n=Math.floor(e/this.cellSize)+Math.floor(t/this.cellSize)*this.state.width,a=this.state.data[n]=[e,t];return this.queue.push(a),a}},{key:"isValidPoint",value:function(e,t){if(e<this.xMin||e>this.xMax||t<this.yMin||t>this.yMax)return!1;for(var n,a,i,s,r=Math.floor((e-this.xMin)/this.cellSize),c=Math.floor((t-this.yMin)/this.cellSize),o=0,l=r-2;l<=r+2;l++)for(var h=c-2;h<=c+2;h++)if(l>=0&&l<this.state.width&&h>=0&&h<this.state.height&&(o=l+h*this.state.width,null!==this.state.data[o]&&(n=e,a=t,i=this.state.data[o][0],s=this.state.data[o][1],(i-n)*(i-n)+(s-a)*(s-a)<=this.radius*this.radius)))return!1;return!0}},{key:"rng",value:function(){return this.prando.next()}},{key:"nextPoint",value:function(){var e=0,t=0;if(this.firstPoint)return this.firstPoint=!1,e=this.xMin+(this.xMax-this.xMin)*this.rng(),t=this.yMin+(this.yMax-this.yMin)*this.rng(),this.createPoint(e,t);for(var n=0,a=0,i=0;this.queue.length;){n=this.queue.length*this.rng()|0;for(var s=0;s<this.k;s++)if(a=this.radius*(this.rng()+1),i=2*Math.PI*this.rng(),e=this.queue[n][0]+a*Math.cos(i),t=this.queue[n][1]+a*Math.sin(i),this.isValidPoint(e,t))return this.createPoint(e,t);this.queue.splice(n,1)}return null}},{key:"points",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MAX_SAFE_INTEGER,t=[],n=0;n<e;n++){var a=this.nextPoint();a&&t.push(a)}return t}},{key:"done",get:function(){return!this.firstPoint&&0===this.queue.length}}]),e}(),I=function(e){Object(p.a)(n,e);var t=Object(y.a)(n);function n(e,a,i){var s;return Object(M.a)(this,n),(s=t.call(this,a,i)).sampler=void 0,s.sampler=Array.isArray(e)?new C(e,4,void 0,a):e,s}return Object(k.a)(n,[{key:"generateMap",value:function(e){for(var t=this.fetchNames(e),n=this.sampler.points(e),a=[],i=0;i<n.length;i++)a.push({name:t[i],position:[Math.max(Math.ceil(n[i][0]-1),0),Math.max(Math.ceil(n[i][1]-1),0)]});return this.reducePositionsToOrigin(a)}}]),n}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new x.a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whiskey","Xray","Yankee","Zulu"];Object(M.a)(this,e),this.prando=t,this.names=n}return Object(k.a)(e,[{key:"fetchNames",value:function(e){return this.names.slice(0,e)}},{key:"computeDistanceWeight",value:function(e,t,n){var a=e-t;return n&&(a=Math.pow(2,a)),a}},{key:"pickFairestHomeSystem",value:function(e){var t,n,a=Number.MAX_SAFE_INTEGER,i=0,s=Object(v.a)(e);try{for(s.s();!(n=s.n()).done;){var r,c=n.value,o=Object(v.a)(e);try{for(o.s();!(r=o.n()).done;){var l=r.value,h=new w(c.position).distance(l.position);h>i&&(i=h)}}catch(M){o.e(M)}finally{o.f()}}}catch(M){s.e(M)}finally{s.f()}var u,j=Object(v.a)(e);try{for(j.s();!(u=j.n()).done;){var d=u.value;if(!d.home){var b,m=[],x=Object(v.a)(e);try{for(x.s();!(b=x.n()).done;){var O=b.value,f=new w(d.position).distance(O.position),g=this.computeDistanceWeight(i,f,!!O.home);m.push(g)}}catch(M){x.e(M)}finally{x.f()}var p=m.reduce((function(e,t){return e+t}),0);p<a&&(a=p,t=d)}}}catch(M){j.e(M)}finally{j.f()}if(!t){var y=e.filter((function(e){return!e.home}));if(0===y.length)throw new Error("Failed to find an open system.");t=this.prando.nextArrayItem(y)}return t}},{key:"reducePositionsToOrigin",value:function(e){var t,n=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,r=Object(v.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value,o=Object(s.a)(c.position,2),l=o[0],h=o[1];l<n&&(n=l),h<a&&(a=h)}}catch(u){r.e(u)}finally{r.f()}return e.map((function(e){var t=Object(s.a)(e.position,2),r=t[0],c=t[1];return r-=n,c-=a,Object(i.a)(Object(i.a)({},e),{},{position:[r,c]})}))}}]),e}()),S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new x.a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["angry","attractive","bald","big","brave","clumsy","fierce","happy","itchy","handsome","petite","repulsive","silly","stocky","tall","tiny","wonderful","zealous"],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["antelope","cat","dog","eagle","gorilla","lion","rabbit","snake","tiger","vulture","zebra"];Object(M.a)(this,e),this.rng=t,this.adjectives=n,this.nouns=a}return Object(k.a)(e,[{key:"next",value:function(){return"".concat(this.rng.nextArrayItem(this.adjectives),"-").concat(this.rng.nextArrayItem(this.nouns),"-").concat(this.rng.nextInt(0,99).toString().padStart(2,"0"))}}]),e}(),A=n(80),F=n(77);function P(e){var t=0,n=0;if(e.forEach((function(e){var a=Object(s.a)(e.position,2),i=a[0],r=a[1];i>t&&(t=i),r>n&&(n=r)})),0===t||0===n)return[];for(var a=new Array(n+1),i=0;i<a.length;i++)a[i]=new Array(t+1).fill("");return e.forEach((function(e){var t=Object(s.a)(e.position,2),n=t[0],i=t[1],r=e.name.substring(0,1);a[i][n]=r})),a}function E(e){return Object(a.jsx)("pre",{style:{border:"1px dashed #666",padding:"5px"},children:P(e.systems).map((function(e){return e.map((function(e){return""===e?"\u2022":e})).join(" ")})).join("\n")+"\n"})}n(300);function N(){var e=l.a.useForm(),t=Object(s.a)(e,1)[0],n=Object(f.f)().replace,r=Object(O.useContext)(F.a);return Object(O.useEffect)((function(){t.setFieldsValue({name:(new S).next(),players:2,online:!1})}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Create a Game"}),Object(a.jsxs)("p",{children:["Currently, you can create ",Object(a.jsx)("strong",{children:"local"})," (offline) games with AI opponents. In future builds, once logged in with"," ",Object(a.jsx)("strong",{children:"Discord"}),", you will be able to create and play online games."]}),Object(a.jsxs)(l.a,{labelCol:{span:1},wrapperCol:{span:4},form:t,onFinish:function(e){r.set(Object(i.a)(Object(i.a)({},e),{},{kind:"Lobby"})),n("/games/".concat(e.name))},children:[Object(a.jsx)(l.a.Item,{name:"name",label:"Name",extra:Object(a.jsx)(a.Fragment,{children:"This name is just used for reference only."}),children:Object(a.jsx)(h.a,{maxLength:30})}),Object(a.jsx)(l.a.Item,{name:"players",label:"Players",extra:Object(a.jsx)(a.Fragment,{children:"2-4 players currently supported."}),children:Object(a.jsx)(u.a,{min:2,max:4})}),Object(a.jsx)(l.a.Item,{name:"online",label:"Connectivity",extra:Object(a.jsx)(a.Fragment,{children:"Local games are versus AI and played offline."}),children:Object(a.jsxs)(j.a.Group,{children:[Object(a.jsx)(j.a.Button,{value:!1,children:"Local"}),Object(a.jsx)(j.a.Button,{value:!0,disabled:!0,children:"Online"})]})}),Object(a.jsx)(l.a.Item,{wrapperCol:{span:5},children:Object(a.jsx)(d.a,{type:"primary",style:{width:"100%"},htmlType:"submit",children:"Create"})})]})]})}function G(e){var t=Object(O.useContext)(F.a),n=Object(f.f)().replace,i=new Array(e.players-1).fill(""),o=Object(O.useState)((function(){return(new x.a).nextString(10)})),j=Object(s.a)(o,2),m=j[0],g=j[1],p=Object(O.useState)(Math.ceil(3*e.players)),y=Object(s.a)(p,2),v=y[0],M=y[1],k=Object(O.useState)([]),w=Object(s.a)(k,2),S=w[0],A=w[1];return Object(O.useEffect)((function(){var e=new x.a(m),t=v/26,n=new C([Math.ceil(50*t),Math.ceil(30*t)],4,void 0,e),a=new I(n,e);A(a.generateMap(v))}),[m,v]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{children:"Players"}),Object(a.jsxs)(b.b,{children:[Object(a.jsx)(b.b.Item,{children:Object(a.jsx)(b.b.Item.Meta,{avatar:Object(a.jsx)(r.a,{}),title:"Human",description:"Ready"})}),i.map((function(e,t){return Object(a.jsx)(b.b.Item,{children:Object(a.jsx)(b.b.Item.Meta,{avatar:Object(a.jsx)(c.a,{}),title:"AI: ".concat(t+1),description:"Ready"})},t)}))]}),Object(a.jsx)("h3",{children:"Settings"}),Object(a.jsxs)(l.a,{labelCol:{span:1},wrapperCol:{span:4},children:[Object(a.jsx)(l.a.Item,{label:"Name",extra:Object(a.jsx)(a.Fragment,{children:"Used for identifying the game only."}),children:Object(a.jsx)(h.a,{readOnly:!0,minLength:10,maxLength:20})}),Object(a.jsx)(l.a.Item,{label:"Seed",extra:Object(a.jsx)(a.Fragment,{children:"Used for procedural generation of systems."}),children:Object(a.jsx)(h.a,{readOnly:!0,minLength:10,maxLength:20,value:m,onChange:function(e){return g(e.target.value)}})}),Object(a.jsx)(l.a.Item,{label:"Preview",children:Object(a.jsx)(E,{systems:S})}),Object(a.jsx)(l.a.Item,{label:"Maximum Systems",extra:Object(a.jsx)(a.Fragment,{children:"A recommended number is 3 systems per player."}),children:Object(a.jsx)(u.a,{min:e.players,max:26,value:v,onChange:function(e){return M(parseInt("".concat(e)))}})}),Object(a.jsxs)("p",{className:"games-buttons",children:[Object(a.jsx)(d.a,{type:"primary",disabled:!0,htmlType:"submit",children:"Start"}),Object(a.jsx)(d.a,{danger:!0,onClick:function(){t.remove(e.name),n("/games")},children:"Delete"})]})]})]})}function L(){var e=Object(f.g)(),t=Object(O.useContext)(F.a).get(e.name),n=Object(f.f)().goBack;return t?"Lobby"===t.kind?Object(a.jsx)(G,Object(i.a)({},t)):Object(a.jsxs)(a.Fragment,{children:["Game for ",Object(a.jsx)("code",{children:e.name})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:["Game ",Object(a.jsx)("code",{children:e.name})," not found."]}),Object(a.jsx)("p",{children:"Either this game has been deleted, or the link is expired."}),Object(a.jsx)(d.a,{onClick:n,children:"Go Back"})]})}function T(){var e=Object(O.useContext)(A.a),t=Object(O.useContext)(F.a),n=Object(f.f)().push,i=t.games.sort((function(e,t){return e.lastUpdate-t.lastUpdate})).map((function(e){return{name:Object(a.jsx)(g.b,{to:"/games/".concat(e.name),children:e.name}),key:e.name,players:e.players,status:"Lobby"!==e.kind||e.online?"Unknown":"Lobby (Host)"}}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Games"}),Object(a.jsxs)("p",{className:"games-buttons",children:[Object(a.jsx)(d.a,{icon:Object(a.jsx)(o.a,{}),type:"dashed",disabled:!e,onClick:function(){n("/games/create")},children:"Create Game"}),Object(a.jsx)(d.a,{icon:Object(a.jsx)(o.a,{}),type:"dashed",disabled:!0,onClick:function(){n("/games/join")},children:"Join Game"})]}),Object(a.jsx)(m.a,{columns:[{title:"Name",dataIndex:"name"},{title:"Players",dataIndex:"players"},{title:"Status",dataIndex:"status"}],dataSource:i,locale:{emptyText:"You are not in any games."},pagination:!1})]})}function q(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(f.c,{children:[Object(a.jsx)(f.a,{path:"/games/create",children:Object(a.jsx)(N,{})}),Object(a.jsx)(f.a,{path:"/games/join",children:"Join"}),Object(a.jsx)(f.a,{path:"/games/:name",children:Object(a.jsx)(L,{})}),Object(a.jsx)(f.a,{exact:!0,path:"/games",component:T})]})})}},195:function(e,t,n){"use strict";n.r(t);var a=n(5),i=(n(0),n(35)),s=n.n(i),r=n(156);n(337);s.a.render(Object(a.jsx)(r.a,{}),document.getElementById("root"))},204:function(e,t,n){},205:function(e,t,n){},296:function(e,t,n){},300:function(e,t,n){},337:function(e,t,n){},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(0),i=n.n(a),s=n(70),r=n(59),c=n(51),o=n(52),l=function(){function e(){Object(c.a)(this,e),this.games=void 0;var t=localStorage.getItem("games")||"[]";try{this.games=JSON.parse(t)}catch(n){console.warn(n),this.games=[]}}return Object(o.a)(e,[{key:"writeChanges",value:function(){localStorage.setItem("games",JSON.stringify(this.games))}},{key:"set",value:function(e){for(var t=0;t<this.games.length;t++)if(this.games[t].name===e.name)return this.games[t]=Object(r.a)(Object(r.a)({},e),{},{lastUpdate:(new Date).getTime()}),void this.writeChanges();this.games.push(e),this.writeChanges()}},{key:"get",value:function(e){var t,n=Object(s.a)(this.games);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.name===e)return a}}catch(i){n.e(i)}finally{n.f()}}},{key:"remove",value:function(e){for(var t=0;t<this.games.length;t++)if(this.games[t].name===e){this.games.splice(t,1);break}this.writeChanges()}}]),e}(),h=i.a.createContext(new l)},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),i=n.n(a).a.createContext(null)}},[[195,1,2]]]);
//# sourceMappingURL=main.37547ebb.chunk.js.map