(this["webpackJsonpthird-conflict"]=this["webpackJsonpthird-conflict"]||[]).push([[0],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),r=n.n(a).a.createContext(null)},164:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var a=n(5),r=n(32),i=n(343),s=n(200),c=n(344),o=n(145),u=n(58),l=n(50),h=n(0),j=n(342),d=n(191),b=n(46),f=n(30),p=(n(209),n(110)),m=n(165),O=n(174),x=n(194);var v=Object(d.hot)(e)((function(){var e=Object(j.a)(["auth"]),t=Object(r.a)(e,2),n=t[0],d=t[1],v=Object(h.useState)(n.auth),y=Object(r.a)(v,2),g=y[0],k=y[1];return Object(a.jsx)(b.a,{children:Object(a.jsxs)(o.a,{children:[Object(a.jsxs)(o.a.Header,{children:[Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)(b.b,{to:"/",children:Object(a.jsx)("img",{src:"/images/logo.png"})})}),Object(a.jsxs)(u.a,{theme:"dark",mode:"horizontal",selectable:!1,children:[Object(a.jsx)(u.a.Item,{disabled:!g,icon:Object(a.jsx)(i.a,{}),children:Object(a.jsx)(b.b,{to:"/games",children:"Games"})}),Object(a.jsx)(u.a.Item,{icon:Object(a.jsx)(s.a,{}),children:Object(a.jsx)(b.b,{to:"/account",children:"Account"})}),Object(a.jsx)(u.a.Item,{disabled:!0,icon:Object(a.jsx)(c.a,{}),children:Object(a.jsx)(b.b,{to:"/settings",children:"Settings"})})]})]}),Object(a.jsx)(p.a.Provider,{value:g,children:Object(a.jsx)(o.a.Content,{children:Object(a.jsxs)(f.c,{children:[Object(a.jsx)(f.a,{path:"/games",children:Object(a.jsx)(x.a,{})}),Object(a.jsx)(f.a,{path:"/account",children:Object(a.jsx)(m.a,{onChange:function(e){d("auth",e),k(e)}})}),Object(a.jsx)(f.a,{path:"/settings",children:"Hello Settings"}),Object(a.jsx)(f.a,{path:"/",children:g?Object(a.jsx)(O.a,{}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(l.a,{type:"dashed",children:Object(a.jsxs)(b.b,{to:"/account",children:[Object(a.jsx)(s.a,{})," Login Required"]})})})})]})})})]})})}))}).call(this,n(208)(e))},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=n(199),i=n(50),s=n(0),c=n(110);n(210);function o(e){var t=Object(s.useContext)(c.a);return Object(a.jsxs)(r.a,{className:"account-form",labelCol:{span:8},wrapperCol:{span:16},children:[Object(a.jsx)("h1",{children:"Account"}),Object(a.jsxs)("p",{children:["A login is required to play ",Object(a.jsx)("strong",{children:"Third Conflict"}),". Currently you can login as a ",Object(a.jsx)("strong",{children:"Guest"})," and create and play games locally. In ",Object(a.jsx)("em",{children:"future"})," releases you will be able to login with"," ",Object(a.jsx)("strong",{children:"Discord"})," and play online."]}),!t&&Object(a.jsxs)(r.a.Item,{children:[Object(a.jsx)(i.a,{type:"primary",onClick:function(){return e.onChange("Guest")},children:"Login as Guest"}),Object(a.jsx)(i.a,{type:"ghost",disabled:!0,children:"Login with Discord"})]}),t&&Object(a.jsx)(i.a,{type:"primary",danger:!0,onClick:function(){return e.onChange(null)},children:"Logout"})]})}},174:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(5),r=n(12),i=n.n(r),s=n(29),c=n(32),o=n(0),u=n(46),l=n(62);n(300);function h(){var e=Object(o.useContext)(l.a),t=Object(o.useState)(),n=Object(c.a)(t,2),r=n[0],h=n[1];return Object(o.useEffect)((function(){Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.gamesList();case 2:n=t.sent,h(n.length);case 4:case"end":return t.stop()}}),t)})))()}),[e]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:["Welcome back to ",Object(a.jsx)("strong",{children:"Third Conflict"})]}),Object(a.jsxs)("p",{children:["You have ",Object(a.jsxs)(u.b,{to:"/games",children:[r," pending game(s)"]}),"."]})]})}},194:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var a=n(5),r=n(12),i=n.n(r),s=n(29),c=n(32),o=n(50),u=n(0),l=n(30),h=n(62),j=(n(304),n(351)),d=n(199),b=n(348),f=n(349),p=n(125),m=n(43),O=n(45),x=n(61),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new x.a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["angry","attractive","bald","big","brave","clumsy","fierce","happy","itchy","handsome","petite","repulsive","silly","stocky","tall","tiny","wonderful","zealous"],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["antelope","cat","dog","eagle","gorilla","lion","rabbit","snake","tiger","vulture","zebra"];Object(m.a)(this,e),this.rng=t,this.adjectives=n,this.nouns=a}return Object(O.a)(e,[{key:"next",value:function(){return"".concat(this.rng.nextArrayItem(this.adjectives),"-").concat(this.rng.nextArrayItem(this.nouns),"-").concat(this.rng.nextInt(0,99).toString().padStart(2,"0"))}}]),e}();function y(){var e=d.a.useForm(),t=Object(c.a)(e,1)[0],n=Object(l.f)().replace,r=Object(u.useContext)(h.a),m=Object(u.useState)(!1),O=Object(c.a)(m,2),x=O[0],y=O[1];return Object(u.useEffect)((function(){t.setFieldsValue({name:(new v).next(),players:2})}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Create a Game"}),Object(a.jsxs)("p",{children:["Currently, you can create ",Object(a.jsx)("strong",{children:"local"})," (offline) games with AI opponents. In future builds, once logged in with"," ",Object(a.jsx)("strong",{children:"Discord"}),", you will be able to create and play online games."]}),Object(a.jsxs)(d.a,{labelCol:{span:1},wrapperCol:{span:4},form:t,onFinish:function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,r.gamesCreate(t.name,t.players);case 3:a=e.sent,n("/games/".concat(a.name));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)(d.a.Item,{name:"name",label:"Name",extra:Object(a.jsx)(a.Fragment,{children:"This name is just used for reference only."}),children:Object(a.jsx)(b.a,{maxLength:30})}),Object(a.jsx)(d.a.Item,{name:"players",label:"Players",extra:Object(a.jsx)(a.Fragment,{children:"2-4 players currently supported."}),children:Object(a.jsx)(f.a,{min:2,max:4})}),Object(a.jsx)(d.a.Item,{name:"online",label:"Connectivity",extra:Object(a.jsx)(a.Fragment,{children:"Local games are versus AI and played offline."}),children:Object(a.jsxs)(p.a.Group,{children:[Object(a.jsx)(p.a.Button,{value:!1,children:"Local"}),Object(a.jsx)(p.a.Button,{value:!0,disabled:!0,children:"Online"})]})}),Object(a.jsx)(d.a.Item,{wrapperCol:{span:5},children:Object(a.jsx)(o.a,{disabled:x,icon:x?Object(a.jsx)(j.a,{}):void 0,type:"primary",style:{width:"100%"},htmlType:"submit",children:x?Object(a.jsx)(a.Fragment,{children:"Saving"}):Object(a.jsx)(a.Fragment,{children:"Create Game"})})})]})]})}var g=n(352),k=n(347),w=n(46);function M(){var e=Object(u.useContext)(h.a),t=Object(l.f)().push,n=Object(u.useState)([]),r=Object(c.a)(n,2),j=r[0],d=r[1];function b(){return(b=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=d,t.next=3,e.gamesList();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(u.useEffect)((function(){!function(){b.apply(this,arguments)}()}),[e]);var f=j.sort((function(e,t){return e.lastUpdated-t.lastUpdated})).map((function(e){return{name:Object(a.jsx)(w.b,{to:"/games/".concat(e.name),children:e.name}),key:e.name,players:e.players,status:"Lobby"===e.kind?"Not Started":"In Progress"}}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Games"}),Object(a.jsxs)("p",{className:"games-buttons",children:[Object(a.jsx)(o.a,{icon:Object(a.jsx)(g.a,{}),type:"dashed",onClick:function(){t("/games/create")},children:"Create Game"}),Object(a.jsx)(o.a,{icon:Object(a.jsx)(g.a,{}),type:"dashed",disabled:!0,onClick:function(){t("/games/join")},children:"Join Game"})]}),Object(a.jsx)(k.a,{columns:[{title:"Name",dataIndex:"name"},{title:"Players",dataIndex:"players"},{title:"Status",dataIndex:"status"}],dataSource:f,locale:{emptyText:"You are not in any games."},pagination:!1})]})}var S=n(200),C=n(353),I=n(350),F=n(104),A=n(103),G=n(93),L=n(94),N=function(){function e(t){Object(m.a)(this,e),this.data=t}return Object(O.a)(e,[{key:"distance",value:function(e){var t=[this.x,this.y],n=t[0],a=t[1],r=e instanceof Array?e:[e.x,e.y],i=Object(c.a)(r,2),s=i[0],o=i[1];return parseFloat(Math.sqrt(Math.pow(s-n,2)+Math.pow(o-a,2)).toFixed(2))}},{key:"x",get:function(){return this.data[0]}},{key:"y",get:function(){return this.data[1]}}]),e}();var E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new x.a;Object(m.a)(this,e),this.prando=r,this.xMin=0,this.yMin=0,this.xMax=void 0,this.yMax=void 0,this.radius=void 0,this.cellSize=void 0,this.k=void 0,this.state=void 0,this.queue=void 0,this.firstPoint=!0,this.xMax=t[0],this.yMax=t[1],this.radius=Math.max(n,1),this.cellSize=this.radius*Math.SQRT1_2,this.k=Math.max(a,2),this.reset()}return Object(O.a)(e,[{key:"reset",value:function(){var e=Math.ceil((this.xMax-this.xMin)/this.cellSize),t=Math.ceil((this.yMax-this.yMin)/this.cellSize);this.state={width:e,height:t,data:new Array(e*t).fill(null)},this.queue=[],this.firstPoint=!0}},{key:"createPoint",value:function(e,t){var n=Math.floor(e/this.cellSize)+Math.floor(t/this.cellSize)*this.state.width,a=this.state.data[n]=[e,t];return this.queue.push(a),a}},{key:"isValidPoint",value:function(e,t){if(e<this.xMin||e>this.xMax||t<this.yMin||t>this.yMax)return!1;for(var n,a,r,i,s=Math.floor((e-this.xMin)/this.cellSize),c=Math.floor((t-this.yMin)/this.cellSize),o=0,u=s-2;u<=s+2;u++)for(var l=c-2;l<=c+2;l++)if(u>=0&&u<this.state.width&&l>=0&&l<this.state.height&&(o=u+l*this.state.width,null!==this.state.data[o]&&(n=e,a=t,r=this.state.data[o][0],i=this.state.data[o][1],(r-n)*(r-n)+(i-a)*(i-a)<=this.radius*this.radius)))return!1;return!0}},{key:"rng",value:function(){return this.prando.next()}},{key:"nextPoint",value:function(){var e=0,t=0;if(this.firstPoint)return this.firstPoint=!1,e=this.xMin+(this.xMax-this.xMin)*this.rng(),t=this.yMin+(this.yMax-this.yMin)*this.rng(),this.createPoint(e,t);for(var n=0,a=0,r=0;this.queue.length;){n=this.queue.length*this.rng()|0;for(var i=0;i<this.k;i++)if(a=this.radius*(this.rng()+1),r=2*Math.PI*this.rng(),e=this.queue[n][0]+a*Math.cos(r),t=this.queue[n][1]+a*Math.sin(r),this.isValidPoint(e,t))return this.createPoint(e,t);this.queue.splice(n,1)}return null}},{key:"points",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MAX_SAFE_INTEGER,t=[],n=0;n<e;n++){var a=this.nextPoint();a&&t.push(a)}return t}},{key:"done",get:function(){return!this.firstPoint&&0===this.queue.length}}]),e}(),P=function(e){Object(F.a)(n,e);var t=Object(A.a)(n);function n(e,a,r){var i;return Object(m.a)(this,n),(i=t.call(this,a,r)).sampler=void 0,i.sampler=Array.isArray(e)?new E(e,4,void 0,a):e,i}return Object(O.a)(n,[{key:"generateMap",value:function(e,t){var n=this,a=this.fetchNames(e);a.sort((function(){return n.prando.nextInt(-1,1)}));for(var r=this.sampler.points(e),i=[],s=0;s<r.length;s++)i.push({name:a[s],position:[Math.max(Math.ceil(r[s][0]-1),0),Math.max(Math.ceil(r[s][1]-1),0)],home:!1});for(;t--;)this.pickFairestHomeSystem(i).home=!0;return this.reducePositionsToOrigin(i)}}]),n}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new x.a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whiskey","Xray","Yankee","Zulu"];Object(m.a)(this,e),this.prando=t,this.names=n}return Object(O.a)(e,[{key:"fetchNames",value:function(e){return this.names.slice(0,e)}},{key:"computeDistanceWeight",value:function(e,t,n){var a=e-t;return n&&(a=Math.pow(2,a)),a}},{key:"pickFairestHomeSystem",value:function(e){var t,n,a=Number.MAX_SAFE_INTEGER,r=0,i=Object(L.a)(e);try{for(i.s();!(n=i.n()).done;){var s,c=n.value,o=Object(L.a)(e);try{for(o.s();!(s=o.n()).done;){var u=s.value,l=new N(c.position).distance(u.position);l>r&&(r=l)}}catch(g){o.e(g)}finally{o.f()}}}catch(g){i.e(g)}finally{i.f()}var h,j=Object(L.a)(e);try{for(j.s();!(h=j.n()).done;){var d=h.value;if(!d.home){var b,f=[],p=Object(L.a)(e);try{for(p.s();!(b=p.n()).done;){var m=b.value,O=new N(d.position).distance(m.position),x=this.computeDistanceWeight(r,O,!!m.home);f.push(x)}}catch(g){p.e(g)}finally{p.f()}var v=f.reduce((function(e,t){return e+t}),0);v<a&&(a=v,t=d)}}}catch(g){j.e(g)}finally{j.f()}if(!t){var y=e.filter((function(e){return!e.home}));if(0===y.length)throw new Error("Failed to find an open system.");t=this.prando.nextArrayItem(y)}return t}},{key:"reducePositionsToOrigin",value:function(e){var t,n=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,r=Object(L.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,s=Object(c.a)(i.position,2),o=s[0],u=s[1];o<n&&(n=o),u<a&&(a=u)}}catch(l){r.e(l)}finally{r.f()}return e.map((function(e){var t=Object(c.a)(e.position,2),r=t[0],i=t[1];return r-=n,i-=a,Object(G.a)(Object(G.a)({},e),{},{position:[r,i]})}))}}]),e}());function T(e){var t=0,n=0;if(e.forEach((function(e){var a=Object(c.a)(e.position,2),r=a[0],i=a[1];r>t&&(t=r),i>n&&(n=i)})),0===t||0===n)return[];for(var a=new Array(n+1),r=0;r<a.length;r++)a[r]=new Array(t+1).fill("");return e.forEach((function(e){var t=Object(c.a)(e.position,2),n=t[0],r=t[1],i=e.name.substring(0,1);a[r][n]=i})),a}function q(e){return Object(a.jsx)("pre",{style:{border:"1px dashed #666",padding:"5px"},children:T(e.systems).map((function(e){return e.map((function(e){return""===e?"\u2022":e})).join(" ")})).join("\n")+"\n"})}function D(e){var t=Object(u.useContext)(h.a),n=Object(l.f)().replace,r=new Array(e.data.players-1).fill(""),j=Object(u.useState)(e.data.seed),p=Object(c.a)(j,2),m=p[0],O=p[1],v=Object(u.useState)(Math.ceil(3*e.data.players)),y=Object(c.a)(v,2),g=y[0],k=y[1],w=Object(u.useState)([]),M=Object(c.a)(w,2),F=M[0],A=M[1];return Object(u.useEffect)((function(){var t=new x.a(m),n=g/26,a=new E([Math.ceil(50*n),Math.ceil(30*n)],4,void 0,t),r=new P(a,t);A(r.generateMap(g,e.data.players))}),[m,g]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{children:"Players"}),Object(a.jsxs)(I.b,{children:[Object(a.jsx)(I.b.Item,{children:Object(a.jsx)(I.b.Item.Meta,{avatar:Object(a.jsx)(S.a,{}),title:"Human",description:"Ready"})}),r.map((function(e,t){return Object(a.jsx)(I.b.Item,{children:Object(a.jsx)(I.b.Item.Meta,{avatar:Object(a.jsx)(C.a,{}),title:"AI: ".concat(t+1),description:"Ready"})},t)}))]}),Object(a.jsx)("h3",{children:"Settings"}),Object(a.jsxs)(d.a,{labelCol:{span:1},wrapperCol:{span:4},onFinish:function(){},children:[Object(a.jsx)(d.a.Item,{label:"Name",extra:Object(a.jsx)(a.Fragment,{children:"Used for identifying the game only."}),children:Object(a.jsx)(b.a,{readOnly:!0,minLength:10,maxLength:20,value:e.data.name})}),Object(a.jsx)(d.a.Item,{label:"Seed",extra:Object(a.jsx)(a.Fragment,{children:"Used for procedural generation of systems."}),children:Object(a.jsx)(b.a,{readOnly:!0,minLength:10,maxLength:20,value:m,onChange:function(e){return O(e.target.value)}})}),Object(a.jsx)(d.a.Item,{label:"Preview",children:Object(a.jsx)(q,{systems:F})}),Object(a.jsx)(d.a.Item,{label:"Maximum Systems",extra:Object(a.jsx)(a.Fragment,{children:"A recommended number is 3 systems per player."}),children:Object(a.jsx)(f.a,{min:e.data.players,max:26,value:g,onChange:function(e){return k(parseInt("".concat(e)))}})}),Object(a.jsxs)("p",{className:"games-buttons",children:[Object(a.jsx)(o.a,{type:"primary",htmlType:"submit",children:"Start"}),Object(a.jsx)(o.a,{danger:!0,onClick:Object(s.a)(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.gamesDelete(e.data.name);case 2:n("/games");case 3:case"end":return a.stop()}}),a)}))),children:"Delete"})]})]})]})}function z(){var e=Object(l.g)(),t=Object(u.useContext)(h.a),n=Object(u.useState)(),r=Object(c.a)(n,2),j=r[0],d=r[1];Object(u.useEffect)((function(){Object(s.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=d,n.next=3,t.gamesFetch(e.name);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})))()}),[t]);var b=Object(l.f)().goBack;return j?"Lobby"===j.kind?Object(a.jsx)(D,{data:j,onStart:Object(s.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=d,n.next=3,t.gamesCreate(e.name,j.players);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})))}):Object(a.jsxs)(a.Fragment,{children:["Game for ",Object(a.jsx)("code",{children:e.name})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:["Game ",Object(a.jsx)("code",{children:e.name})," not found."]}),Object(a.jsx)("p",{children:"Either this game has been deleted, or the link is expired."}),Object(a.jsx)(o.a,{onClick:b,children:"Go Back"})]})}function U(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/games/create",component:y}),Object(a.jsx)(l.a,{path:"/games/:name",component:z}),Object(a.jsx)(l.a,{exact:!0,path:"/games",component:M})]})})}},201:function(e,t,n){"use strict";n.r(t);var a=n(5),r=(n(0),n(38)),i=n.n(r),s=n(164);n(341);i.a.render(Object(a.jsx)(s.a,{}),document.getElementById("root"))},209:function(e,t,n){},210:function(e,t,n){},300:function(e,t,n){},304:function(e,t,n){},341:function(e,t,n){},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(12),r=n.n(a),i=n(29),s=n(43),c=n(45),o=n(144),u=n(71),l=n(104),h=n(103),j=n(0),d=n.n(j),b=function e(){Object(s.a)(this,e)},f=n(93),p=n(61);function m(e){return JSON.parse(JSON.stringify(e))}var O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;return Object(s.a)(this,n),(e=t.call(this,function(){var e=a.getItem("games");return e?JSON.parse(e):{}}())).storage=a,e}return Object(c.a)(n,[{key:"writeState",value:function(){var e=Object(i.a)(r.a.mark((function e(t,a){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)(Object(u.a)(n.prototype),"writeState",this).call(this,t,a);case 2:return i=e.sent,this.storage.setItem("games",JSON.stringify(this.games)),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteState",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)(Object(u.a)(n.prototype),"deleteState",this).call(this,t);case 2:this.storage.setItem("games",JSON.stringify(this.games));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new p.a;Object(s.a)(this,e),this.games=t,this.prando=n}return Object(c.a)(e,[{key:"readState",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.games[t],e.abrupt("return",n?m(n):void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"writeState",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.games[t]=m(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteState",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.games[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"currentTime",value:function(){return(new Date).getTime()}},{key:"onAccountLogin",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onGamesFetch",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=Object.values(this.games);case 1:if(!(n<a.length)){e.next=12;break}if((i=a[n]).name!==t){e.next=9;break}if("Lobby"!==i.kind){e.next=8;break}return e.abrupt("return",i);case 8:return e.abrupt("return",{name:i.name,kind:i.kind,lastUpdated:i.lastUpdated,players:i.players.length});case 9:n++,e.next=1;break;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onGamesList",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.values(this.games).map((function(e){return{name:e.name,kind:e.kind,lastUpdated:e.lastUpdated,players:"number"===typeof e.players?e.players:e.players.length}})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onGamesCreate",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.writeState(n.name,Object(f.a)(Object(f.a)({},n),{},{seed:this.prando.nextString(10),createdBy:t,kind:"Lobby",lastUpdated:this.currentTime()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onGamesDelete",value:function(e,t){return this.deleteState(t.name)}}]),e}()),x=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Guest",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new O;return Object(s.a)(this,n),(e=t.call(this)).player=a,e.server=r,e}return Object(c.a)(n,[{key:"accountLogin",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"accountLogout",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"gamesFetch",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.server.onGamesFetch(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gamesList",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.server.onGamesList());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gamesDelete",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.server.onGamesDelete(this.player,{name:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gamesCreate",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.server.onGamesCreate(this.player,{name:t,players:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(b),v=d.a.createContext(new x)}},[[201,1,2]]]);
//# sourceMappingURL=main.94885ec6.chunk.js.map